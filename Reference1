create or replace FUNCTION MASTER.FUNC_GET_TL_ADDR_test_TU (
an_letterbuilder_queue_id LETTERBUILDER_QUEUE.LETTERBUILDER_QUEUE_ID%TYPE
) RETURN VARCHAR2 IS
 -- ***********************************************************************
 -- FUNC_GET_TL_ADDR_CITY_TU
 --
 -- Description:  Returns the Tidelands Address line 1 For Tidelands Applicant
 --
 -- Parameters:  an_letterbuilder_queue_id
 --
 -- Returns:   string
 --
 -- Modification History:
 -- Programmer  	Date   		Description
 -- --------------  	--------  	-----------------------------------------------
 -- N. DiMartino  	2/10/09  	Returns the Tidelands Address line 1 For Tidelands Applicant
 -- L. Cerami           02/08/17        Updated to return with End Date NULL
-- K. Burns              09/21/2017 Testing/learning new NJEMS functions functionality
 LS_RETURN VARCHAR2(200) := ' ';

BEGIN
  SELECT SUBJ_ITEM_CONTACT.CITY_NAME
  INTO LS_RETURN
  FROM
    SUBJ_ITEM_CONTACT,
    DSK_CENTRAL_FILE,
    SUBJECT_ITEM
  WHERE
    SUBJ_ITEM_CONTACT.MASTER_AI_ID = SUBJECT_ITEM.MASTER_AI_ID AND
    SUBJ_ITEM_CONTACT.INT_DOC_ID = SUBJECT_ITEM.INT_DOC_ID AND
    SUBJ_ITEM_CONTACT.SUBJECT_ITEM_CATEGORY_CODE = SUBJECT_ITEM.SUBJECT_ITEM_CATEGORY_CODE AND
    SUBJ_ITEM_CONTACT.SUBJECT_ITEM_ID = SUBJECT_ITEM.SUBJECT_ITEM_ID AND
    subject_item.int_doc_id = dsk_central_file.int_doc_id and
    SUBJ_ITEM_CONTACT.NONDEP_CONTACT_TYPE_CODE = 'TU' AND
    SUBJ_ITEM_CONTACT.END_DATE IS NULL AND
    SUBJ_ITEM_CONTACT.START_DATE IS NOT NULL AND
    DSK_CENTRAL_FILE.INT_DOC_ID = Func_Get_Control_Doc_For_Lb(an_letterbuilder_queue_id, 'TDLSET');



 RETURN LS_RETURN;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		RETURN '';
	WHEN OTHERS THEN
		RETURN SQLERRM;
END;
